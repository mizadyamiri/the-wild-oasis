import{m as b,_ as S,j as e,B as p,H as F}from"./index-04b7707c.js";import{u as q}from"./index.esm-f66c1361.js";import{F as y,I as n}from"./Form-61c0972a.js";import{F as r}from"./FormRow-bb3e6feb.js";import{u as C}from"./useMutation-5ff00217.js";function v(){const{mutate:d,isLoading:a}=C({mutationFn:b,onSuccess:i=>{console.log(i),S.success("Account successfully created. please verify the new account from the user's email address")},onError:()=>{}});return{signup:d,isLoading:a}}function E(){var l,u,m,c;const{signup:d,isLoading:a}=v(),{register:i,formState:f,getValues:h,handleSubmit:g,reset:o}=q(),{errors:s}=f;function x({fullName:t,email:w,password:j}){console.log(t),d({fullName:t,email:w,password:j},{onSettled:()=>o()})}return e.jsxs(y,{onSubmit:g(x),children:[e.jsx(r,{label:"Full name",error:(l=s==null?void 0:s.fullName)==null?void 0:l.message,children:e.jsx(n,{type:"text",id:"fullName",disabled:a,...i("fullName",{required:"This field is required"})})}),e.jsx(r,{label:"Email address",error:(u=s==null?void 0:s.email)==null?void 0:u.message,children:e.jsx(n,{type:"email",id:"email",disabled:a,...i("email",{required:"This field is required",pattern:{value:/\S+@\S+\.\S+/,message:"Email is not valid"}})})}),e.jsx(r,{label:"Password (min 8 characters)",error:(m=s==null?void 0:s.password)==null?void 0:m.message,children:e.jsx(n,{type:"password",id:"password",disabled:a,...i("password",{required:"This field is required",minLength:{value:8,message:"password should be atleast 8 character"}})})}),e.jsx(r,{label:"Repeat password",error:(c=s==null?void 0:s.passwordConfirm)==null?void 0:c.message,children:e.jsx(n,{type:"password",id:"passwordConfirm",disabled:a,...i("passwordConfirm",{required:"This field is required",validate:t=>t===h().password||"Passwords need to match"})})}),e.jsxs(r,{children:[e.jsx(p,{disabled:a,variation:"secondary",type:"reset",onClick:o,children:"Cancel"}),e.jsx(p,{disabled:a,children:"Create new user"})]})]})}function H(){return e.jsxs(e.Fragment,{children:[e.jsx(F,{as:"h1",children:"Create a new user"}),e.jsx(E,{})]})}export{H as default};
